<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Contractors | ProCrafted Homes</title>
<link rel="stylesheet" href="style.css">
<script defer src="contractorsdata.js"></script>
<script defer src="main.js"></script>
</head>
<body>

<nav>
  <div class="logo">ProCrafted Homes</div>
  <ul>
    <li><a href="index.html">Home</a></li>
    <li><a href="services.html">Services</a></li>
    <li><a href="contractors.html" style="color:var(--secondary)">Contractors</a></li>
    <li><a href="projects.html">Projects</a></li>
    <li><a href="tools.html">Tools</a></li>
    <li><a href="about.html">About</a></li>
    <li><a href="contact.html">Contact</a></li>
  </ul>
</nav>

<section style="padding: 60px 70px;">
  <h2 style="font-family:'Playfair Display'; font-size:2.4rem; margin-bottom:20px;">Find Trusted Contractors</h2>
  
  <!-- Search & Filters -->
  <div style="display:flex; gap:20px; margin-bottom:30px;">
    <input id="searchBar" placeholder="Search by name, skill, or city" style="flex:2; padding:12px 15px; border:1px solid #ddd; border-radius:4px;">
    <select id="filterCity" style="padding:12px 15px; border:1px solid #ddd; border-radius:4px;">
      <option value="">All Cities</option>
    </select>
  </div>

  <!-- Contractor List -->
  <div id="contractors-list"></div>
</section>

<footer>
  © 2025 ProCrafted Homes | Premium Construction & Design Solutions
</footer>

<!-- Firebase SDKs -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
  import { getDatabase, ref, get, child } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-database.js";

  // Your Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyBeccwySrja43f_q1nGjxekdxIq9ecsEvo",
    authDomain: "procrafted-homes.firebaseapp.com",
    databaseURL: "https://procrafted-homes-default-rtdb.firebaseio.com",
    projectId: "procrafted-homes",
    storageBucket: "procrafted-homes.firebasestorage.app",
    messagingSenderId: "496370643233",
    appId: "1:496370643233:web:586bde30180cb3652f4e60"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  // Fetch contractor data
  const dbRef = ref(db);

  get(child(dbRef, "contractors")).then((snapshot) => {
    if (snapshot.exists()) {
      const contractors = snapshot.val();
      const container = document.getElementById("contractors-list");

      container.innerHTML = "";

      Object.values(contractors).forEach(contractor => {
        const card = document.createElement("div");
        card.classList.add("contractor-card");
        card.innerHTML = `
          <img src="${contractor.image}" alt="${contractor.name}">
          <h3>${contractor.name}</h3>
          <p><strong>City:</strong> ${contractor.city}</p>
          <p><strong>Rating:</strong> ⭐ ${contractor.rating}</p>
          <p><strong>Specialties:</strong> ${contractor.specialties.join(", ")}</p>
        `;
        container.appendChild(card);
      });
    } else {
      console.log("No data found");
    }
  }).catch((error) => {
    console.error(error);
  });
</script>

</body>
</html>
